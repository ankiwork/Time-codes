#include <stdio.h>
#include <stdlib.h>

#define N 5  //Матрица размером NxN

int FindSumma(int a[N][N], int p) {  //Функция поиска суммы в заданом столбце закрашенной области
    
    int i, j;  //Счётчики для прохода по матрице
    int sum = 0; //Переменная для хранения и возврата суммы заданного столбца
    
    for (i = 0; i < N; i++) {  //Цикл для прохода по строкам
        
        for (j = 0; j < N; j++) {  //Цикл для прохода по столбцам
            
            if ((i > j) && (j == p)) {  //Условие столбца + области
                
                sum += a[i][j];  //Прибавить к общей сумме каждое новое число
                
            }
            
        }
        
    }
    
    return sum;  //Вернуть сумму
    
}

int main(int argc, const char * argv[]) {  //Главная функция
 
    int a[N][N];  //Объявление матрицы
    int i, j;  //Счётчики для прохода по матрице
    
    printf("\n\n");  //Двойной отступ для красоты вывода в консоль
    for (i = 0; i < N; i++) {  //Цикл для прохода по строкам
        
        for (j = 0; j < N; j++) {  //Цикл для прохода по столбцам
            
            if (i > j) {  //Условие заштрихованной области
                
                a[i][j] = 1 + rand() % 9;  //Присвоение каждому элементу матрицы случайного числа от 1 до 9
                printf("\x1B[31m%5d\033[0m", a[i][j]);  //Вывести отдельный элемент на экран
                
            } else if (i == j) {  //Условие диагонали
                
                a[i][j] = 1 + rand() % 9;  //Присвоение каждому элементу матрицы случайного числа от 1 до 9
                printf("\x1B[32m%5d\033[0m", a[i][j]);  //Вывести отдельный элемент на экран
                
            } else {  //Условие остальной части
                
                a[i][j] = 1 + rand() % 9;  //Присвоение каждому элементу матрицы случайного числа от 1 до 9
                printf("\x1B[33m%5d\033[0m", a[i][j]);  //Вывести отдельный элемент на экран
                
            }
             
        }
        
        printf("\n\n");  //Двойной отступ для красоты вывода в консоль
        
    }
    
    int p;  //Введённый столбец с клавиатуры
    printf("Введите столбец от 1 до %d включительно: ", N - 1); scanf_s("%d", &p);  //Запрос пользователя на ввод столбца
    p--;  //Преобразование из жизни в компьютер
    
    int sum;  //Переменная для хранения и возврата суммы заданного столбца
    sum = FindSumma(a, p);  //Вызов функции
    printf("Сумма %d столбца заштрихованной области: %d\n", p + 1, sum);  //Вывод на экран суммы
    
    return 0;  //Вернуть 0
    
}
